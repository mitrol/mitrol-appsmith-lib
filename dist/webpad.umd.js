!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).webpad=t()}(this,(function(){"use strict";const e=async e=>{var t="",r="",a=!1;let n=window.location.href;console.log(`getUrlParams - url: ${n}`);for(let o=0;void 0!==n[o];o++)if(a){if("&"===n[o]||void 0===n[o])break;t+=n[o]}else n[o]===e[r.length]?(r+=n[o])===e&&(o++,a=!0):r="";return t},t=async(e,t)=>{appsmith.URL.fullPath;var r=new Headers;r.append("Authorization","Bearer "+t);var a={method:"POST",headers:r,redirect:"follow"};const n=await fetch(globals.apiUrl+e,a);return await n.json()},r=async(e,t)=>{var r=new Headers;r.append("Authorization","Bearer "+t);var a={method:"GET",headers:r,redirect:"follow"};const n=await fetch(globals.apiUrl+e,a);return await n.json()};return{call:async(r,a)=>{try{const n=`/api/call?idCampania=${a}&destino=${r}`;console.log(`call - calling endpoint ${n}`);let o=e("jwt");console.log(`call - obtained jwt as: ${o}`),await t(n,o).then((e=>e.idInteraccion))}catch(e){return console.error(`Error on call: ${e}`),!1}},hold:async r=>{let a=e("jwt"),n=`/api/hold?idInteraccion=${r}`;try{return await t(n,a),!0}catch(e){return console.error(`Error on hold: ${e}`),!1}},resume:async r=>{let a=e("jwt"),n=`/api/resume?idInteraccion=${r}`;try{return t(n,a),!0}catch(e){return console.error(`Error on resume: ${e}`),!1}},hangup:async r=>{try{let a=e("jwt");const n=`/api/hangup?idInteraccion=${r}`;return await t(n,a),!0}catch(e){return console.error(`Error on hangup: ${e}`),!1}},getOutboundCampaigns:async t=>{let a=e("jwt"),n=`/api/${t}/campaigns`,o=await r(n,a);o=await o.value;let i=[];for(let e=0;e<o.length;e++)"Saliente"==o[e].nombreModoCampania&&i.push(o[e]);return i},setResultadoGestion:async(t,a)=>{try{let n=e("jwt"),o=`/interactionresult?idInteraccion=${t}&idResultadoGestionInterno=${a}`;return await r(o,n),!0}catch(e){return console.error(`Error on setResultadoGestion: ${e}`),!1}},getResultadoGestion:async()=>{}}}));
