!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(r="undefined"!=typeof globalThis?globalThis:r||self).mitrol=t()}(this,(function(){"use strict";return{apiUrl:"",formUrl:"",post:async(r,t)=>{var o=new Headers;o.append("Authorization","Bearer "+t);var e={method:"POST",headers:o,redirect:"follow"};let a=mitrol.apiUrl+r;const l=await fetch(a,e);return console.log("post - urlWS: ",a),console.log("post - response: ",l),await l.json()},get:async(r,t)=>{var o=new Headers;o.append("Authorization","Bearer "+t);var e={method:"GET",headers:o,redirect:"follow"};let a=mitrol.apiUrl+r;const l=await fetch(mitrol.apiUrl+r,e);return console.log("get - urlWS: ",a),await l.json()},call:async(r,t)=>{try{const o=`/api/${mitrol.getUrlParams("loginId")}/call?idCampania=${t}&destino=${r}`;console.log(`call - calling endpoint ${o}`);let e=mitrol.getUrlParams("jwt");await mitrol.post(o,e).then((r=>(console.log(`call - res.idInteraccion: ${r.idInteraccion}`),r.idInteraccion)))}catch(r){return console.error(`Error on call: ${r}`),!1}},hold:async r=>{let t=mitrol.getUrlParams("jwt"),o=`/api/hold?idInteraccion=${r}`;try{return await mitrol.post(o,t),!0}catch(r){return console.error(`Error on hold: ${r}`),!1}},resume:async r=>{let t=mitrol.getUrlParams("jwt"),o=`/api/resume?idInteraccion=${r}`;try{return mitrol.post(o,t),!0}catch(r){return console.error(`Error on resume: ${r}`),!1}},hangup:async r=>{try{let t=mitrol.getUrlParams("jwt");const o=`/api/hangup?idInteraccion=${r}`;return await mitrol.post(o,t),!0}catch(r){return console.error(`Error on hangup: ${r}`),!1}},getOutboundCampaigns:async r=>{let t=mitrol.getUrlParams("jwt"),o=`/api/${r}/campaigns`,e=await mitrol.get(o,t);e=await e.value;let a=[];for(let r=0;r<e.length;r++)"Saliente"==e[r].nombreModoCampania&&a.push(e[r]);return a},setResultadoGestion:async(r,t)=>{try{let o=mitrol.getUrlParams("jwt"),e=`/interactionresult?idInteraccion=${r}&idResultadoGestionInterno=${t}`;return await mitrol.get(e,o),!0}catch(r){return console.error(`Error on setResultadoGestion: ${r}`),!1}},getResultadoGestion:async()=>{},getUrlParams:r=>{var t="",o="",e=!1;console.log(`getUrlParams - mitrol.formUrl: ${mitrol.formUrl}`);for(let a=0;void 0!==mitrol.formUrl[a];a++)if(e){if("&"===mitrol.formUrl[a]||void 0===mitrol.formUrl[a])break;t+=mitrol.formUrl[a]}else mitrol.formUrl[a]===r[o.length]?(o+=mitrol.formUrl[a])===r&&(a++,e=!0):o="";return console.log(`getUrlParams - paramName: ${r} | paramValue: ${t}`),t}}}));
