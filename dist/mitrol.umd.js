!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).mitrol=t()}(this,(function(){"use strict";return{apiUrl:"",formUrl:"",post:async(e,t)=>{var r=new Headers;r.append("Authorization","Bearer "+t);var o={method:"POST",headers:r,redirect:"follow"};let a=mitrol.apiUrl+e;const l=await fetch(a,o);return console.log("post - urlWS: ",a),console.log("post - response: ",l),await l.json()},get:async(e,t)=>{var r=new Headers;r.append("Authorization","Bearer "+t);var o={method:"GET",headers:r,redirect:"follow"};let a=mitrol.apiUrl+e;const l=await fetch(mitrol.apiUrl+e,o);return console.log("get - urlWS: ",a),await l.json()},call:async(e,t)=>{try{const r=`/api/${mitrol.getUrlParams("loginId")}/call?idCampania=${t}&destino=${e}`;console.log(`call - calling endpoint ${r}`);let o=mitrol.getUrlParams("jwt"),a=await mitrol.post(r,o);return console.log(`call - res.idInteraccion: ${a.idInteraccion}`),a.idInteraccion}catch(e){return console.error(`Error on call: ${e}`),!1}},callOnInteraction:async e=>{try{const t=`/api/${mitrol.getUrlParams("loginId")}/call?idCampania=${mitrol.getUrlParams("idcampania")}&destino=${e}&interactionId=${mitrol.getUrlParams("idLlamada")}`;console.log(`call - calling endpoint ${t}`);let r=mitrol.getUrlParams("jwt"),o=await mitrol.post(t,r);return console.log(`call - res.idInteraccion: ${o.idInteraccion}`),o.idInteraccion}catch(e){return console.error(`Error on call: ${e}`),!1}},hold:async e=>{let t=mitrol.getUrlParams("jwt"),r=`/api/hold?idInteraccion=${e}`;try{return await mitrol.post(r,t),!0}catch(e){return console.error(`Error on hold: ${e}`),!1}},resume:async e=>{let t=mitrol.getUrlParams("jwt"),r=`/api/resume?idInteraccion=${e}`;try{return mitrol.post(r,t),!0}catch(e){return console.error(`Error on resume: ${e}`),!1}},getOutboundCampaigns:async e=>{let t=mitrol.getUrlParams("jwt"),r=`/api/${e}/campaigns`,o=await mitrol.get(r,t);o=await o.value;let a=[];for(let e=0;e<o.length;e++)"Saliente"==o[e].nombreModoCampania&&a.push(o[e]);return a},getUrlParams:e=>{var t="",r="",o=!1;for(let a=0;void 0!==mitrol.formUrl[a];a++)if(o){if("&"===mitrol.formUrl[a]||void 0===mitrol.formUrl[a])break;t+=mitrol.formUrl[a]}else mitrol.formUrl[a]===e[r.length]?(r+=mitrol.formUrl[a])===e&&(a++,o=!0):r="";return console.log(`getUrlParams - paramName: ${e} | paramValue: ${t}`),t},hangup:async e=>{try{let t=String(await mitrol.getUrlParams("loginId")),r=String(await mitrol.getUrlParams("jwt")),o=`/api/${t}/hangup?idInteraccion=${e}`;return 200===(await mitrol.post(o,r)).status?(console.log("hangup - success"),!0):(console.log("hangup - failed"),!1)}catch(e){return console.error(`Error on hangup: ${e}`),!1}},setResultadoGestion:async(e,t,r)=>{try{let o=String(await mitrol.getUrlParams("loginId")),a=String(await mitrol.getUrlParams("jwt")),l=`/api/${o}/interactionresult?idInteraccion=${e}&crmId=${t}&idResultadoGestionInterno=${r}&idResultadoGestionExterno=${r}`;return 200===(await mitrol.get(l,a)).status?(console.log("setResultadoGestion - success"),!0):(console.log("setResultadoGestion - failed"),!1)}catch(e){return console.error(`Error on setResultadoGestion: ${e}`),null}},getResultadoGestion:async e=>{try{let t=[],r=[];for(let o=0;o<e.length;o++)t.some((t=>t.name===e[o].parent_name&&t.code===e[o].parent_name))||t.push({name:e[o].parent_name,code:e[o].parent_name}),r.some((t=>t.name===e[o].child_name&&t.code===e[o].idResultadoGestionChild))||r.push({name:e[o].child_name,code:e[o].idResultadoGestionChild});return console.log(`getResultadoGestion - La categorias son:${t}. Las subcategorias son: ${r}.`),[t,r]}catch(e){return console.error(`Error on getResultadoGestion: ${e}`),null}},setResultadoUI:async e=>{try{let t=[];for(let r=0;r<e.length;r++)gestionPadre.selectedOptionValue===e[r].parent_name&&t.push({name:e[r].child_name,code:e[r].idResultadoGestionChild});return console.log(`setUIResultadoGestion - ${t}`),t}catch(e){return console.error(`Error on setUIResultadoChild: ${e}`),null}}}}));
