!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e="undefined"!=typeof globalThis?globalThis:e||self).mitrol=r()}(this,(function(){"use strict";return{apiUrl:"",formUrl:"",post:async(e,r)=>{var t=new Headers;t.append("Authorization","Bearer "+r);var a={method:"POST",headers:t,redirect:"follow"};const o=await fetch(apiUrl+e,a);return await o.json()},get:async(e,r)=>{var t=new Headers;t.append("Authorization","Bearer "+r);var a={method:"GET",headers:t,redirect:"follow"};const o=await fetch(apiUrl+e,a);return await o.json()},call:async(e,r)=>{try{const t=`/api/call?idCampania=${r}&destino=${e}`;console.log(`call - calling endpoint ${t}`);let a=getUrlParams("jwt");console.log(`call - obtained jwt as: ${a}`),await post(t,a).then((e=>e.idInteraccion))}catch(e){return console.error(`Error on call: ${e}`),!1}},hold:async e=>{let r=getUrlParams("jwt"),t=`/api/hold?idInteraccion=${e}`;try{return await post(t,r),!0}catch(e){return console.error(`Error on hold: ${e}`),!1}},resume:async e=>{let r=getUrlParams("jwt"),t=`/api/resume?idInteraccion=${e}`;try{return post(t,r),!0}catch(e){return console.error(`Error on resume: ${e}`),!1}},hangup:async e=>{try{let r=getUrlParams("jwt");const t=`/api/hangup?idInteraccion=${e}`;return await post(t,r),!0}catch(e){return console.error(`Error on hangup: ${e}`),!1}},getOutboundCampaigns:async e=>{let r=getUrlParams("jwt"),t=`/api/${e}/campaigns`,a=await get(t,r);a=await a.value;let o=[];for(let e=0;e<a.length;e++)"Saliente"==a[e].nombreModoCampania&&o.push(a[e]);return o},setResultadoGestion:async(e,r)=>{try{let t=getUrlParams("jwt"),a=`/interactionresult?idInteraccion=${e}&idResultadoGestionInterno=${r}`;return await get(a,t),!0}catch(e){return console.error(`Error on setResultadoGestion: ${e}`),!1}},getResultadoGestion:async()=>{},getUrlParams:async e=>{var r="",t="",a=!1;let o=mitrol.formUrl;console.log(`getUrlParams - url: ${o}`);for(let n=0;void 0!==o[n];n++)if(a){if("&"===o[n]||void 0===o[n])break;r+=o[n]}else o[n]===e[t.length]?(t+=o[n])===e&&(n++,a=!0):t="";return r}}}));
