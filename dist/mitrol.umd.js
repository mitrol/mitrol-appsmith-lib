!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(r="undefined"!=typeof globalThis?globalThis:r||self).mitrol=e()}(this,(function(){"use strict";return{apiUrl:"",formUrl:"",post:async(r,e)=>{var t=new Headers;t.append("Authorization","Bearer "+e);var o={method:"POST",headers:t,redirect:"follow"};let a=mitrol.apiUrl+r;const l=await fetch(a,o);return console.log("post - urlWS: ",a),console.log("post - response: ",l),await l.json()},get:async(r,e)=>{var t=new Headers;t.append("Authorization","Bearer "+e);var o={method:"GET",headers:t,redirect:"follow"};let a=mitrol.apiUrl+r;const l=await fetch(mitrol.apiUrl+r,o);return console.log("get - urlWS: ",a),await l.json()},call:async(r,e)=>{try{const t=`/api/${mitrol.getUrlParams("loginId")}/call?idCampania=${e}&destino=${r}`;console.log(`call - calling endpoint ${t}`);let o=mitrol.getUrlParams("jwt"),a=await mitrol.post(t,o);return console.log(`call - res.idInteraccion: ${a.idInteraccion}`),a.idInteraccion}catch(r){return console.error(`Error on call: ${r}`),!1}},callOnInteraction:async(r,e,t)=>{try{const o=`/api/${mitrol.getUrlParams("loginId")}/call?idCampania=${e}&destino=${r}&interactionId=${t}`;console.log(`call - calling endpoint ${o}`);let a=mitrol.getUrlParams("jwt"),l=await mitrol.post(o,a);return console.log(`call - res.idInteraccion: ${l.idInteraccion}`),l.idInteraccion}catch(r){return console.error(`Error on call: ${r}`),!1}},hold:async r=>{let e=mitrol.getUrlParams("jwt"),t=`/api/hold?idInteraccion=${r}`;try{return await mitrol.post(t,e),!0}catch(r){return console.error(`Error on hold: ${r}`),!1}},resume:async r=>{let e=mitrol.getUrlParams("jwt"),t=`/api/resume?idInteraccion=${r}`;try{return mitrol.post(t,e),!0}catch(r){return console.error(`Error on resume: ${r}`),!1}},hangup:async r=>{try{let e=mitrol.getUrlParams("jwt");const t=`/api/hangup?idInteraccion=${r}`;return await mitrol.post(t,e),!0}catch(r){return console.error(`Error on hangup: ${r}`),!1}},getOutboundCampaigns:async r=>{let e=mitrol.getUrlParams("jwt"),t=`/api/${r}/campaigns`,o=await mitrol.get(t,e);o=await o.value;let a=[];for(let r=0;r<o.length;r++)"Saliente"==o[r].nombreModoCampania&&a.push(o[r]);return a},setResultadoGestion:async(r,e)=>{try{let t=mitrol.getUrlParams("jwt"),o=`/interactionresult?idInteraccion=${r}&idResultadoGestionInterno=${e}`;return await mitrol.get(o,t),!0}catch(r){return console.error(`Error on setResultadoGestion: ${r}`),!1}},getResultadoGestion:async r=>{let e=[];console.log(`getResultadoGestion - resultadosGestion: ${r}`);for(let t of r){e.find((r=>r.label===t.parent_name))||e.push({label:t.parent_name,value:t.parent_name,children:[]});let r=e.find((r=>r.label===t.parent_name));r&&r.children.push({label:t.child_name,value:t.child_name})}return console.log(`getResultadoGestion - resultados: ${e}`),e},getUrlParams:r=>{var e="",t="",o=!1;for(let a=0;void 0!==mitrol.formUrl[a];a++)if(o){if("&"===mitrol.formUrl[a]||void 0===mitrol.formUrl[a])break;e+=mitrol.formUrl[a]}else mitrol.formUrl[a]===r[t.length]?(t+=mitrol.formUrl[a])===r&&(a++,o=!0):t="";return console.log(`getUrlParams - paramName: ${r} | paramValue: ${e}`),e}}}));
